<div>
    <div class="users_list_header">
        <h1 class="users_list_title">Users</h1>
        <div class="users_list_searchbar">
            <form class="d-flex" role="search">
                <input class="form-control me-2" type="search" placeholder="Search by username" aria-label="Search" name="search_user">
                <button class="btn btn-outline-success" type="button">Search</button>
            </form>
        </div>
    </div>
    
    <div class="users_list_container" id="users_list_container">
        <!-- <div class="users_list_floor" id="users_list_floor_0">
            <div class="user_list_item">
                <div class="user_list_card_top">
                    <div class="user_list_card_top_avatar_container">
                        <img src="assets/images/default_avatar.svg" alt="avatar"
                        class="rounded-circle" id="" style="max-width: 120px; height: auto;">
                    </div>
                    <span>vicalvez</span>
                </div>
                <div class="user_list_card_bottom">
                    <button class="btn btn-outline-primary">View profile</button>
                </div>
            </div>
            <div class="user_list_item">
                <div class="user_list_card_top">
                    <div class="user_list_card_top_avatar_container">
                        <img src="assets/images/default_avatar.svg" alt="avatar"
                        class="rounded-circle" id="" style="max-width: 120px; height: auto;">
                    </div>
                    <span>vicalvez</span>
                </div>
                <div class="user_list_card_bottom">
                    <button class="btn btn-outline-primary">View profile</button>
                </div>
            </div>
            <div class="user_list_item">
                <div class="user_list_card_top">
                    <div class="user_list_card_top_avatar_container">
                        <img src="assets/images/default_avatar.svg" alt="avatar"
                        class="rounded-circle" id="" style="transform: scale(0.75);">
                    </div>
                    <span>vicalvez</span>
                </div>
                <div class="user_list_card_bottom">
                    <button class="btn btn-outline-primary">View profile</button>
                </div>
            </div>
            <div class="user_list_item">
                <div class="user_list_card_top">
                    <div class="user_list_card_top_avatar_container">
                        <img src="assets/images/default_avatar.svg" alt="avatar"
                        class="rounded-circle" id="" style="transform: scale(0.75);">
                    </div>
                    <span>vicalvez</span>
                </div>
                <div class="user_list_card_bottom">
                    <button class="btn btn-outline-primary">View profile</button>
                </div>
            </div>
            
        </div>
        <div class="users_list_floor" id="users_list_floor_1">
            <div class="user_list_item">
                <div class="user_list_card_top">
                    <div class="user_list_card_top_avatar_container">
                        <img src="assets/images/default_avatar.svg" alt="avatar"
                        class="rounded-circle" id="" style="transform: scale(0.75);">
                    </div>
                    <span>vicalvez</span>
                </div>
                <div class="user_list_card_bottom">
                    <button class="btn btn-outline-primary">View profile</button>
                </div>
            </div>
            <div class="user_list_item">
                <div class="user_list_card_top">
                    <img src="assets/images/default_avatar.svg" alt="avatar"
                    class="rounded-circle" id="" style="transform: scale(0.75);">
                    <span>vicalvez</span>
                </div>
                <div class="user_list_card_bottom">
                    <button class="btn btn-outline-primary">View profile</button>
                </div>
            </div>
            <div class="user_list_item">
                <div class="user_list_card_top">
                    <img src="assets/images/default_avatar.svg" alt="avatar"
                    class="rounded-circle" id="" style="transform: scale(0.75);">
                    <span>vicalvez</span>
                </div>
                <div class="user_list_card_bottom">
                    <button class="btn btn-outline-primary">View profile</button>
                </div>
            </div>
            <div class="user_list_item">
                <div class="user_list_card_top">
                    <img src="assets/images/default_avatar.svg" alt="avatar"
                    class="rounded-circle" id="" style="transform: scale(0.75);">
                    <span>vicalvez</span>
                </div>
                <div class="user_list_card_bottom">
                    <button class="btn btn-outline-primary">View profile</button>
                </div>
            </div>
            <div class="user_list_item">
                <div class="user_list_card_top">
                    <img src="assets/images/default_avatar.svg" alt="avatar"
                    class="rounded-circle" id="" style="transform: scale(0.75);">
                    <span>vicalvez</span>
                </div>
                <div class="user_list_card_bottom">
                    <button class="btn btn-outline-primary">View profile</button>
                </div>
            </div>
        </div> -->
    </div>
</div>

<style>
    .users_list_header {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }
    
    .users_list_title {
        text-align: center;
    }
    
    .users_list_searchbar {
        width: 30%;
        margin-top: 3vh;
    }
    
    .users_list_container {
        margin-top: 10vh;
        display: flex;
        flex-direction: column;
        margin-bottom: 100px;
    }
    
    .users_list_floor {
        display: flex;
        flex-direction: row;
        margin-top: 1vh;
        justify-content: center;
    }
    
    .user_list_item {
        margin: 15px 15px 0px 0px;
        padding: 20px 50px;
        background-color: var(--light-beige);
        color: black;
        display: flex;
        flex-direction: column;
        box-shadow: 2px 2px 5px var(--flashy-pink);
        transition: 0.3s ease;
    }
    
    .user_list_card_top {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
    }
    
    .user_list_card_top_avatar_container {
        overflow: hidden;
        width: 120px;
        height: 120px;
        display: flex;
        border-radius: 100%;
        justify-content: center;
        align-items: center;
        margin: auto;
        border: 3px inset var(--flashy-pink);
    }
    
    .user_list_card_top span {
        margin-top: 15px;
    }
    
    .user_list_card_bottom {
        margin-top: 10px;
    }
</style>

<script>
    
    function addFloor(floorId)
    {
        container = document.getElementById("users_list_container");
        floor = document.createElement("div");
        floor.classList.add("users_list_floor");
        floor.id = "users_list_floor_"+floorId;
        container.appendChild(floor);
    }
    
    function addUserCard(username, avatar, floorId)
    {
        container = document.getElementById("users_list_floor_"+floorId);
        if (container == null)
        {
            addFloor(floorId);
            container = document.getElementById("users_list_floor_"+floorId);
        }
        
        element = document.createElement("div");
        element.classList.add("user_list_item");
        
        element.innerHTML = `<div class="user_list_card_top"> \
                                <div class="user_list_card_top_avatar_container"> \
                                    <img src="${avatar}" alt="avatar" \
                                    class="rounded-circle" id="" style="max-width: 180px; height: auto;"> \
                                </div> \
                                <span>${username}</span> \
                            </div> \
                            <div class="user_list_card_bottom"> \
                                <button class="btn btn-outline-primary" onclick="navigate('/users/profile/${username}')">View profile</button> \
                            </div>`;
            container.appendChild(element);
        }
        
        async function loadUsers()
        {
            userList = await retrieveAllUsers()
            .then(data => {
                users = [];
                for (userId in data)
                {
                    userData = data[userId];
                    username = userData.username;
                    avatar = userData.avatar;
                    
                    users.push({"id": userId, "username":username, "avatar":avatar});
                }
                return users;
            }).catch(error => { console.error(error) });
            
            floorId = 0;
            for (user of userList)
            {
                console.log(user);
                addUserCard(user.username, user.avatar, floorId / 5);
                floorId++;
            }
            return userList;
        }
        
        async function loadUserLists()
        {
            users = loadUsers();
        }
        
        loadUserLists();
    </script>