<div>
    <h1 data-i18n="home_page_title"></h1>
    <span id="logged_in_msg"></span>
    <script>
        function checkLogin()
        {
            loggedInMsg = document.getElementById("logged_in_msg");
            const session_token = getCookieAcccessToken();
            const logged_in = isLoggedIn();

            console.log("Cookie: " + session_token);

            loggedInMsg.style.display = logged_in ? 'block' : 'none';

            if (logged_in)
            {
                userName = document.getElementById("username");

                retrieveUsername(session_token)
                .then(data => {
                    console.log(data.username);
                    fetchTranslationWithArgs('user_logged_in_message_format_name', [data.username])
                        .then(translatedMessage => {
                            if (translatedMessage) {
                                loggedInMsg.innerText = translatedMessage;
                            } else {
                                loggedInMsg.innerText = "Error";
                            }
                        }).catch(error => {
                        loggedInMsg.innerText = error;
                    });
                }).catch(error => {
                    loggedInMsg.innerText = error;
                });
            }
        }
        checkLogin();
    </script>

</div>